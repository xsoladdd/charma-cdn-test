{"version":3,"file":"charma-widget.js","sourceRoot":"","sources":["../../../src/components/charma-widget/charma-widget.tsx"],"names":[],"mappings":"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","sourcesContent":["import { Build, Component, Env, Host, Listen, Prop, State, Watch, h } from '@stencil/core';\nimport i18next from 'i18next';\nimport { charmaAPI } from '../../api';\nimport { billingSchema, deliverySchema } from '../../api/schemas';\nimport { billingState, deliveryState, resetAllStates, widgetState } from '../../store';\nimport { languagesSchema } from '../../types/widget';\nimport type { ButtonSizes } from '../charma-gifting-button/charma-gifting-button';\nimport { joinClass } from '../../utils/joinClass';\nimport { OpenWidgetData } from '../../api/types';\nimport { promiseDelay } from '../../utils/promiseDelay';\n\n@Component({\n  tag: 'charma-widget',\n  styleUrl: 'charma-widget.scss',\n  shadow: true,\n})\nexport class CharmaWidget {\n  @State() showWidget = false;\n  @State() disabled = false;\n  @State() isSubmitting = false;\n  @State() isProductLoading = true;\n  @State() step = 1;\n  @State() hasPreselectedProduct = false;\n  @Prop() buttonSize: ButtonSizes = 'default';\n  @Prop() language: 'en' | 'sv' = 'en';\n  @Prop() productId: string;\n  animationLoaded = false;\n\n  componentWillLoad() {\n    const currentLanguage = i18next.language;\n    if (currentLanguage !== this.language && languagesSchema.safeParse(this.language).success) {\n      widgetState.language = this.language;\n      i18next.changeLanguage(this.language);\n    }\n  }\n\n  componentDidLoad() {\n    if (Build.isDev) {\n      // No shipping\n      // const key = `eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJvcmdJZCI6IjI0ZDdkYTgyLWNjOWItNGJlZi04MTdjLTI2N2FjZGU3MjJlOSIsImlhdCI6MTY4MTA3ODI4NCwiZXhwIjoxNjgxMDc4MzQ0fQ.6l8S31q_2gX-1HOMUiG4OloX4lYcmZfCTN2JYDT9FqY`;\n\n      // No billing\n      const key = `eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJvcmdJZCI6IjI0ZDdkYTgyLWNjOWItNGJlZi04MTdjLTI2N2FjZGU3MjJlOSIsImlhdCI6MTY4MDAwNDU1NywiZXhwIjoxNjgwMDA0NjE3fQ.f-BBpE2l5IVwsOxnN9Xn7ot_xiYfCT4uvEjOqNLimq8`;\n\n      charmaAPI.init(key);\n    }\n  }\n\n  @Listen('charma-widget-open', { target: 'window' })\n  openWidget(e: CustomEvent<Partial<OpenWidgetData>>) {\n    const data = e.detail;\n    if (data && Object.keys(data).length) {\n      if (data.delivery) {\n        Object.assign(deliveryState, data.delivery);\n        widgetState.isDeliveryValid = true;\n      }\n      if (data.billing) {\n        Object.assign(billingState, data.billing);\n        widgetState.isBillingValid = true;\n      }\n    }\n    this.showWidget = true;\n  }\n\n  handleCloseWidget() {\n    this.showWidget = false;\n    this.step = 1;\n    this.hasPreselectedProduct = false;\n    this.isProductLoading = false;\n    document.body.style.position = '';\n    document.body.style.top = '';\n\n    resetAllStates();\n  }\n\n  @Listen('charma-widget-close', { target: 'window' })\n  closeWidget() {\n    this.handleCloseWidget();\n  }\n\n  @Listen('invalid-charma-key', { target: 'window' })\n  invalidKey() {\n    this.disabled = true;\n  }\n\n  @Watch('showWidget')\n  async onModalOpen(newState: boolean, prevState: boolean) {\n    if (this.showWidget === false) {\n      return;\n    }\n    if (newState !== prevState && newState === true && charmaAPI.keyMetadata) {\n      this.validateAndSetInitialData();\n    }\n    this.isProductLoading = true;\n    const productsRes = await charmaAPI.getProducts();\n    if (productsRes?.products) {\n      this.isProductLoading = false;\n      widgetState.products = productsRes.products;\n      const preselectedProduct = widgetState.products.find(product => product.productIdentifier === this.productId || product.productIdentifier === widgetState.preselectedProduct);\n\n      if (preselectedProduct) {\n        widgetState.preselectedProduct = preselectedProduct;\n        this.onProductSelect(preselectedProduct.id);\n        this.hasPreselectedProduct = true;\n        if (!widgetState.isDeliveryValid) {\n          this.step = 2;\n          return;\n        }\n        if (!widgetState.isBillingValid) {\n          this.step = 3;\n          return;\n        }\n        this.step = 4;\n        return;\n      }\n      this.step = 1;\n    }\n  }\n\n  validateAndSetInitialData() {\n    const delivery = deliverySchema.safeParse(charmaAPI.keyMetadata.shippingAddress);\n    if (delivery.success) {\n      Object.assign(deliveryState, delivery.data);\n      widgetState.isDeliveryValid = true;\n    }\n\n    const billing = billingSchema.safeParse(charmaAPI.keyMetadata.billingAddress);\n    if (billing.success) {\n      Object.assign(billingState, billing.data);\n      widgetState.isBillingValid = true;\n    }\n  }\n\n  toggleForm = () => {\n    if (this.disabled) return;\n    document.body.style.position = 'fixed';\n    document.body.style.top = `-$${window.scrollY}px`;\n    this.showWidget = true;\n    this.step = 1;\n  };\n\n  async onGiftSubmit() {\n    this.isSubmitting = true;\n    await promiseDelay(500);\n    return await charmaAPI\n      .createOrder({\n        lines: widgetState.selectedProducts.map(productId => ({\n          count: 1,\n          productGroupId: Env.DEFAULT_PRODUCT_GROUP_ID,\n          productId,\n        })),\n        customerInfo: {\n          givenName: deliveryState.givenName,\n          familyName: deliveryState.familyName,\n          phone: deliveryState.phone,\n          email: billingState.email,\n        },\n        billing: billingState,\n        delivery: {\n          ...deliveryState,\n          familyName: deliveryState.type === 'personal' ? deliveryState.familyName : '',\n          givenName: deliveryState.type === 'personal' ? deliveryState.givenName : '',\n          organizationName: deliveryState.type === 'company' ? deliveryState.organizationName : '',\n        },\n        siteId: Env.SITE_ID,\n      })\n      .then(order => {\n        if ('statusCode' in order && order['statusCode'] !== 200) {\n          throw new Error('Something went wrong');\n        } else {\n          return (widgetState.order = order);\n        }\n      })\n      .finally(() => {\n        this.isSubmitting = false;\n      });\n  }\n\n  navigateTab = (index: number) => {\n    this.step = index;\n  };\n\n  nextStep = async () => {\n    switch (this.step) {\n      case 1:\n        if (!widgetState.preselectedProduct && widgetState.selectedProducts.length === 0) {\n          widgetState.error = 'product error';\n          break;\n        } else {\n          widgetState.error = undefined;\n        }\n        if (widgetState.isDeliveryValid && widgetState.isBillingValid) {\n          this.step = 4;\n        } else if (widgetState.isDeliveryValid) {\n          this.step = 3;\n        } else if (widgetState.isBillingValid) {\n          this.step = 2;\n        } else {\n          this.step += 1;\n        }\n        break;\n\n      case 2:\n        const validateShippingForm = deliverySchema.safeParse(deliveryState);\n        if (validateShippingForm.success === false) {\n          widgetState.deliveryFormErrors = validateShippingForm.error.formErrors.fieldErrors;\n          widgetState.error = 'form error';\n          break;\n        } else {\n          widgetState.error = undefined;\n        }\n        if (widgetState.isBillingValid) {\n          this.step = 4;\n        } else {\n          this.step += 1;\n        }\n        break;\n      case 3:\n        const validateBillingForm = billingSchema.safeParse(billingState);\n        if (validateBillingForm.success === false) {\n          widgetState.billingFormErrors = validateBillingForm.error.formErrors.fieldErrors;\n          widgetState.error = 'form error';\n          break;\n        } else {\n          widgetState.error = undefined;\n          this.step += 1;\n        }\n        break;\n      case 4:\n        return await this.onGiftSubmit()\n          .then(() => {\n            widgetState.error = undefined;\n            this.step = 5;\n          })\n          .catch(err => {\n            console.error(err);\n            widgetState.error = 'submitting error';\n          });\n      case 5:\n        this.handleCloseWidget();\n      default:\n        this.step += 1;\n        break;\n    }\n  };\n\n  goBack = () => {\n    switch (this.step) {\n      case 3:\n        if (widgetState.isDeliveryValid) {\n          this.step = 1;\n          break;\n        } else {\n          this.step -= 1;\n          break;\n        }\n\n      case 4:\n        if (widgetState.isDeliveryValid && widgetState.isBillingValid) {\n          this.step = 1;\n        } else if (widgetState.isBillingValid) {\n          this.step = 2;\n        } else if (widgetState.isDeliveryValid) {\n          this.step = 3;\n        } else {\n          this.step -= 1;\n        }\n        break;\n      default:\n        this.step -= 1;\n        break;\n    }\n  };\n\n  onProductSelect = (id: string) => {\n    if (widgetState.selectedProducts.includes(id)) {\n      widgetState.selectedProducts = widgetState.selectedProducts.filter(p => p !== id);\n    } else {\n      widgetState.selectedProducts = [...widgetState.selectedProducts, id];\n    }\n  };\n\n  renderSteps() {\n    switch (this.step) {\n      case 1:\n        return <charma-products onProductSelect={(e: CustomEvent) => this.onProductSelect(e.detail)}></charma-products>;\n      case 2:\n        return <charma-delivery language={widgetState.language}></charma-delivery>;\n      case 3:\n        return <charma-payment language={widgetState.language}></charma-payment>;\n      case 4:\n        return <charma-confirmation navigateTab={this.navigateTab} language={widgetState.language}></charma-confirmation>;\n      case 5:\n        return <charma-order-placed language={widgetState.language}></charma-order-placed>;\n      default:\n        return null;\n    }\n  }\n\n  getButtonLabel() {\n    if (this.isSubmitting) return i18next.t('loading_text');\n    if (this.step === 4) {\n      return i18next.t('order');\n    } else if (this.step === 5) {\n      return i18next.t('exit');\n    }\n    return i18next.t('next');\n  }\n\n  switchlanguage(language: 'en' | 'sv') {\n    widgetState.language = language;\n    i18next.changeLanguage(language);\n  }\n\n  getError(): string {\n    if (widgetState.error === 'form error') {\n      return i18next.t('errors.formError');\n    } else if (widgetState.error === 'product error') {\n      return i18next.t('errors.selectProduct');\n    } else if (widgetState.error === 'submitting error') {\n      return i18next.t('errors.submittingError');\n    } else {\n      return '';\n    }\n  }\n\n  render() {\n    const sideBarMenu = [\n      {\n        id: 1,\n        title: i18next.t('sideBar.itemSelection'),\n        subtitle: i18next.t('sideBar.itemSelectionSubtitle'),\n        svg: (\n          <svg width=\"11\" height=\"12\" viewBox=\"0 0 11 12\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" class=\"w-[20px] h-[20px]  \">\n            <path\n              d=\"M10.2593 5.8V10.2C10.2593 10.4122 10.1812 10.6157 10.0423 10.7657C9.90339 10.9157 9.71498 11 9.51852 11H2.48148C2.28502 11 2.09661 10.9157 1.9577 10.7657C1.81878 10.6157 1.74074 10.4122 1.74074 10.2V5.8M5.81481 2.4C5.81481 2.12311 5.73879 1.85243 5.59635 1.6222C5.45391 1.39197 5.25146 1.21253 5.01459 1.10657C4.77772 1.00061 4.51708 0.972882 4.26562 1.0269C4.01417 1.08092 3.78319 1.21426 3.6019 1.41005C3.42061 1.60584 3.29715 1.8553 3.24713 2.12687C3.19711 2.39845 3.22278 2.67994 3.3209 2.93576C3.41901 3.19157 3.58516 3.41022 3.79834 3.56406C4.01151 3.71789 4.26214 3.8 4.51852 3.8H5.81481M5.81481 2.4V3.8M5.81481 2.4C5.81481 2.12311 5.89084 1.85243 6.03328 1.6222C6.17572 1.39197 6.37817 1.21253 6.61504 1.10657C6.85191 1.00061 7.11255 0.972882 7.36401 1.0269C7.61546 1.08092 7.84644 1.21426 8.02773 1.41005C8.20902 1.60584 8.33248 1.8553 8.3825 2.12687C8.43252 2.39845 8.40685 2.67994 8.30873 2.93576C8.21062 3.19157 8.04447 3.41022 7.8313 3.56406C7.61812 3.71789 7.36749 3.8 7.11111 3.8H5.81481M5.81481 3.8V11M1.55556 5.8H10.4444C10.7511 5.8 11 5.5312 11 5.2V4.4C11 4.0688 10.7511 3.8 10.4444 3.8H1.55556C1.24889 3.8 1 4.0688 1 4.4V5.2C1 5.5312 1.24889 5.8 1.55556 5.8Z\"\n              stroke=\"black\"\n              stroke-width=\"0.75\"\n              stroke-linecap=\"round\"\n              stroke-linejoin=\"round\"\n            />\n          </svg>\n        ),\n      },\n      {\n        id: 2,\n        title: i18next.t('sideBar.shippingAddress'),\n        subtitle: i18next.t('sideBar.shippingAddressSubtitle'),\n        svg: (\n          <svg width=\"13\" height=\"11\" viewBox=\"0 0 13 11\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" class=\"w-[20px] h-[20px]\">\n            <path\n              d=\"M4.19855 9.10003C4.19855 9.33872 4.10114 9.56763 3.92774 9.7364C3.75433 9.90518 3.51915 10 3.27392 10C3.02869 10 2.79351 9.90518 2.6201 9.7364C2.4467 9.56763 2.34928 9.33872 2.34928 9.10003M4.19855 9.10003C4.19855 8.86134 4.10114 8.63243 3.92774 8.46365C3.75433 8.29488 3.51915 8.20006 3.27392 8.20006C3.02869 8.20006 2.79351 8.29488 2.6201 8.46365C2.4467 8.63243 2.34928 8.86134 2.34928 9.10003M4.19855 9.10003H7.8971M2.34928 9.10003H1.19349C1.00957 9.10003 0.833178 9.02892 0.703126 8.90233C0.573074 8.77575 0.500011 8.60407 0.500011 8.42505V6.40012M7.8971 9.10003H9.28405M7.8971 9.10003V6.40012M0.500011 6.40012V1.81926C0.499032 1.65497 0.560706 1.49616 0.673096 1.37358C0.785487 1.251 0.940603 1.17336 1.10842 1.15568C3.16299 0.948106 5.23412 0.948106 7.28869 1.15568C7.63697 1.19048 7.8971 1.47847 7.8971 1.81926V2.39404M0.500011 6.40012H7.8971M11.1333 9.10003C11.1333 9.33872 11.0359 9.56763 10.8625 9.7364C10.6891 9.90518 10.4539 10 10.2087 10C9.96346 10 9.72827 9.90518 9.55487 9.7364C9.38147 9.56763 9.28405 9.33872 9.28405 9.10003M11.1333 9.10003C11.1333 8.86134 11.0359 8.63243 10.8625 8.46365C10.6891 8.29488 10.4539 8.20006 10.2087 8.20006C9.96346 8.20006 9.72827 8.29488 9.55487 8.46365C9.38147 8.63243 9.28405 8.86134 9.28405 9.10003M11.1333 9.10003H11.8268C12.2096 9.10003 12.5227 8.79764 12.4987 8.42565C12.3748 6.4443 11.6893 4.53511 10.5181 2.91003C10.4066 2.7578 10.2609 2.63225 10.0922 2.54286C9.92348 2.45347 9.73609 2.40258 9.54418 2.39404H7.8971M7.8971 2.39404V6.40012\"\n              stroke=\"black\"\n              stroke-width=\"0.75\"\n              stroke-linecap=\"round\"\n              stroke-linejoin=\"round\"\n            />\n          </svg>\n        ),\n      },\n      {\n        id: 3,\n        title: i18next.t('sideBar.billingAddress'),\n        subtitle: i18next.t('sideBar.billingAddressSubtitle'),\n        svg: (\n          <svg width=\"11\" height=\"10\" viewBox=\"0 0 11 10\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" class=\"w-[20px] h-[20px]\">\n            <path\n              d=\"M0.5 3H10.5M0.5 3.4H10.5M2.03846 6.2H5.11538M2.03846 7.4H3.57692M1.65385 9H9.34615C9.65217 9 9.94566 8.87357 10.162 8.64853C10.3784 8.42348 10.5 8.11826 10.5 7.8V2.2C10.5 1.88174 10.3784 1.57652 10.162 1.35147C9.94566 1.12643 9.65217 1 9.34615 1H1.65385C1.34783 1 1.05434 1.12643 0.837954 1.35147C0.621566 1.57652 0.5 1.88174 0.5 2.2V7.8C0.5 8.11826 0.621566 8.42348 0.837954 8.64853C1.05434 8.87357 1.34783 9 1.65385 9Z\"\n              stroke=\"black\"\n              stroke-width=\"0.75\"\n              stroke-linecap=\"round\"\n              stroke-linejoin=\"round\"\n            />\n          </svg>\n        ),\n      },\n      {\n        id: 4,\n        title: i18next.t('sideBar.confirmation'),\n        subtitle: i18next.t('sideBar.confirmationSubtitle'),\n        svg: (\n          <svg width=\"12\" height=\"12\" viewBox=\"0 0 12 12\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" class=\"w-[20px] h-[20px]\">\n            <path\n              d=\"M6 3.27273H6.91667M6 5.09091H6.91667M2.33333 6.90909H6.91667M2.33333 8.72727H6.91667M8.75 3.27273H10.8125C11.192 3.27273 11.5 3.57818 11.5 3.95455V9.63636C11.5 9.99802 11.3551 10.3449 11.0973 10.6006C10.8394 10.8563 10.4897 11 10.125 11M8.75 3.27273V9.63636C8.75 9.99802 8.89487 10.3449 9.15273 10.6006C9.41059 10.8563 9.76033 11 10.125 11M8.75 3.27273V1.68182C8.75 1.30545 8.442 1 8.0625 1H1.1875C0.808 1 0.5 1.30545 0.5 1.68182V9.63636C0.5 9.99802 0.644866 10.3449 0.902728 10.6006C1.16059 10.8563 1.51033 11 1.875 11H10.125M2.33333 3.27273H4.16667V5.09091H2.33333V3.27273Z\"\n              stroke=\"black\"\n              stroke-width=\"0.75\"\n              stroke-linecap=\"round\"\n              stroke-linejoin=\"round\"\n            />\n          </svg>\n        ),\n      },\n      {\n        id: 5,\n        title: i18next.t('sideBar.thankYou'),\n        subtitle: i18next.t('sideBar.thankYouSubtitle'),\n        svg: (\n          <svg width=\"13\" height=\"14\" viewBox=\"0 0 13 14\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" class=\"w-[20px] h-[20px]\">\n            <path\n              d=\"M5.15415 9.40246L4.65385 11.1538L4.15354 9.40246C4.02423 8.95007 3.78178 8.53808 3.44908 8.20538C3.11638 7.87268 2.70439 7.63023 2.252 7.50092L0.5 7L2.25138 6.49969C2.70378 6.37038 3.11577 6.12794 3.44847 5.79524C3.78117 5.46253 4.02361 5.05055 4.15292 4.59815L4.65385 2.84615L5.15415 4.59754C5.28346 5.04993 5.52591 5.46192 5.85861 5.79462C6.19131 6.12732 6.6033 6.36977 7.05569 6.49908L8.80769 7L7.05631 7.50031C6.60391 7.62962 6.19193 7.87206 5.85923 8.20476C5.52652 8.53747 5.28408 8.94945 5.15477 9.40185L5.15415 9.40246ZM10.3517 4.97846L10.1923 5.61538L10.0329 4.97846C9.94169 4.61329 9.75294 4.27977 9.48684 4.01356C9.22074 3.74735 8.88729 3.55846 8.52215 3.46708L7.88462 3.30769L8.52215 3.14831C8.88729 3.05693 9.22074 2.86804 9.48684 2.60183C9.75294 2.33562 9.94169 2.0021 10.0329 1.63692L10.1923 1L10.3517 1.63692C10.443 2.00218 10.6318 2.33575 10.898 2.60196C11.1643 2.86818 11.4978 3.05703 11.8631 3.14831L12.5 3.30769L11.8631 3.46708C11.4978 3.55836 11.1643 3.74721 10.898 4.01342C10.6318 4.27964 10.443 4.61321 10.3517 4.97846ZM9.51169 12.272L9.26923 13L9.02677 12.272C8.95879 12.0681 8.84428 11.8828 8.69228 11.7308C8.54029 11.5788 8.355 11.4643 8.15108 11.3963L7.42308 11.1538L8.15108 10.9114C8.355 10.8434 8.54029 10.7289 8.69228 10.5769C8.84428 10.4249 8.95879 10.2396 9.02677 10.0357L9.26923 9.30769L9.51169 10.0357C9.57967 10.2396 9.69419 10.4249 9.84618 10.5769C9.99817 10.7289 10.1835 10.8434 10.3874 10.9114L11.1154 11.1538L10.3874 11.3963C10.1835 11.4643 9.99817 11.5788 9.84618 11.7308C9.69419 11.8828 9.57967 12.0681 9.51169 12.272Z\"\n              stroke=\"black\"\n              stroke-width=\"0.75\"\n              stroke-linecap=\"round\"\n              stroke-linejoin=\"round\"\n            />\n          </svg>\n        ),\n      },\n    ];\n\n    const closeButton = (\n      <button onClick={() => this.handleCloseWidget()} class=\" flex place-items-start\">\n        <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"20\" height=\"20\" fill=\"currentColor\" aria-label=\"circle xmark\" viewBox=\"0 0 512 512\">\n          <path d=\"M256 512c141.4 0 256-114.6 256-256S397.4 0 256 0S0 114.6 0 256S114.6 512 256 512zM175 175c9.4-9.4 24.6-9.4 33.9 0l47 47 47-47c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9l-47 47 47 47c9.4 9.4 9.4 24.6 0 33.9s-24.6 9.4-33.9 0l-47-47-47 47c-9.4 9.4-24.6 9.4-33.9 0s-9.4-24.6 0-33.9l47-47-47-47c-9.4-9.4-9.4-24.6 0-33.9z\"></path>\n        </svg>\n      </button>\n    );\n\n    const loader = (\n      <div class=\"flex place-content-center place-items-center h-full w-full pt-[300px]\">\n        <div class=\"flex space-x-2 animate-pulse\">\n          <div class=\"w-3 h-3 bg-gray-500 rounded-full\"></div>\n          <div class=\"w-3 h-3 bg-gray-500 rounded-full\"></div>\n          <div class=\"w-3 h-3 bg-gray-500 rounded-full\"></div>\n        </div>\n      </div>\n    );\n\n    const renderHeader = () => {\n      switch (this.step) {\n        case 1:\n          return i18next.t('step_product.title');\n        case 2:\n          return i18next.t('shippingInfromation.title');\n        case 3:\n          return i18next.t('billingInformation.title');\n        case 4:\n          return i18next.t('confirmation.title');\n        default:\n          return '';\n      }\n    };\n\n    const logo = (\n      <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"130\" height=\"26\" viewBox=\"0 0 170 26\" fill=\"none\">\n        <path\n          d=\"M18.5 1.70001C20.2 0.200012 22.7 -0.299988 24.8 0.200012C27.4 0.800012 29.6 3.00001 30.1 5.60001C30.8 8.60001 29.4 12 26.7 13.5C24.2 14.6 21.4 15 18.8 15.7C22.1 17.8 25.3 20.1 28.7 22.3C29.1 22.6 29.5 22.8 29.7 23.2C29.3 24 28.8 24.9 28.1 25.5C27.6 25.3 27.2 25 26.8 24.8C23 22.2 19.1 19.6 15.3 17.1C11 20 6.69998 22.8 2.39998 25.6C1.59998 24.9 1.09998 23.9 0.599979 23C4.29998 20.6 7.89998 18.2 11.7 15.9C9.89998 15.5 8.09998 15.1 6.39998 14.4C4.49998 13.8 2.39998 12.9 1.29998 11.2C-0.400022 8.70001 -0.300022 5.10001 1.69998 2.80001C3.89998 -0.499988 9.19998 -0.899988 12 1.90001C13.9 3.50001 14.5 6.00001 15.1 8.20001C15.7 5.90001 16.6 3.40001 18.5 1.70001ZM5.39998 3.60001C3.49998 4.50001 2.59998 6.80001 3.39998 8.80001C3.89998 10 4.99998 10.8 6.29998 11.2C8.49998 12 10.8 12.8 13.2 13C12.5 10.4 12 7.70001 10.7 5.30001C9.79998 3.40001 7.19998 2.50001 5.39998 3.60001ZM21.5 3.50001C19.7 4.20001 19.2 6.10001 18.6 7.60001C18 9.40001 17.5 11.2 17.1 13.1C19.6 12.5 22.2 11.9 24.6 10.9C26.2 10.2 27.3 8.50001 27.1 6.80001C26.9 4.20001 23.9 2.30001 21.5 3.50001ZM40.1 11.4C40.8 6.90001 44.7 3.20001 49.3 2.70001C52 2.40001 54.9 3.00001 56.9 4.80001C56.9 4.90001 56.9 5.10001 56.9 5.20001C56.2 6.30001 55.4 7.30001 54.7 8.40001C54.5 8.70001 54.1 9.30001 53.7 8.90001C52.9 8.40001 52 7.80001 50.9 7.80001C48.7 7.60001 46.4 8.90001 45.6 11C44.6 13.2 45.2 15.9 47.1 17.4C48.4 18.5 50.2 18.9 51.8 18.4C52.7 18.2 53.4 17.5 54.2 17.3C55.3 18.6 56.1 20 57.1 21.4C53.5 24.6 47.6 24.4 43.9 21.5C41.8 19.9 40.4 17.5 40 14.9C39.9 14.9 39.8 14.9 39.8 15C39.7 13.8 39.7 12.6 39.8 11.4C39.9 11.4 40.1 11.4 40.1 11.4ZM60.8 3.10001C62.5 2.90001 64.4 2.90001 66.1 3.10001C66.3 5.40001 66.1 7.70001 66.2 10C68.5 10 70.9 10 73.2 10C73.2 7.60001 73 5.30001 73.3 3.00001C75 2.80001 76.7 2.90001 78.4 3.00001C78.5 3.40001 78.5 3.90001 78.5 4.40001C78.5 10.4 78.5 16.3 78.5 22.3C78.5 22.7 78.4 23.2 78.3 23.6C76.6 23.6 74.9 23.6 73.2 23.6C72.9 20.8 73.1 17.9 73.1 15C70.8 15 68.4 15 66.1 15C66 17.9 66.2 20.7 66 23.5C64.5 23.5 62.9 23.5 61.4 23.5C60.9 23.6 60.7 23 60.7 22.5C60.8 16.1 60.8 9.60001 60.8 3.10001ZM88.8 3.80001C89 3.50001 89.1 2.90001 89.6 3.00001C90.8 2.90001 92.1 3.00001 93.3 3.00001C93.9 2.90001 94.1 3.70001 94.3 4.10001C96.6 10 98.9 15.9 101.3 21.8C101.5 22.4 101.7 23 101.9 23.6C100.2 23.6 98.6 23.7 96.9 23.6C96 22.9 95.9 21.4 95.4 20.4C92.9 20.4 90.3 20.4 87.7 20.4C87.2 21.5 87.1 22.7 86.4 23.6C84.7 23.7 83 23.6 81.3 23.6C81.5 22.7 81.8 21.9 82.2 21.1C84.3 15.3 86.6 9.50001 88.8 3.80001ZM91.4 9.50001C90.7 11.6 90 13.7 89.2 15.8C90.7 15.8 92.2 15.8 93.7 15.8C92.9 13.7 92.2 11.6 91.4 9.50001ZM104.7 3.00001C108 2.90001 111.4 2.90001 114.8 2.90001C118.9 3.00001 121.9 7.40001 120.8 11.3C120.3 13 119.1 14.4 117.7 15.4C119.1 18 120.5 20.6 121.8 23.2C121.7 23.3 121.6 23.4 121.5 23.5C119.6 23.6 117.8 23.5 115.9 23.5C114.6 21.2 113.5 18.8 112.2 16.5C111.5 16.5 110.7 16.5 110 16.5C109.9 18.8 110.2 21.2 109.8 23.5C108.1 23.5 106.4 23.5 104.7 23.5C104.5 21.8 104.6 20.1 104.6 18.4C104.7 13.3 104.5 8.10001 104.7 3.00001ZM110 7.20001C110 8.80001 110 10.4 110 12C111.3 12 112.5 12.1 113.8 11.9C115.4 11.4 116.1 9.20001 114.9 8.00001C113.7 6.70001 111.6 7.40001 110 7.20001ZM125.5 3.10001C125.6 3.10001 125.7 3.00001 125.8 2.90001C127.5 2.80001 129.2 2.90001 130.9 2.90001C131.3 2.80001 131.3 3.40001 131.5 3.60001C132.8 7.70001 134 11.8 135.3 15.9C136.2 12.6 137.3 9.40001 138.3 6.10001C138.7 5.10001 138.9 4.00001 139.3 2.90001C141 2.80001 142.8 2.80001 144.6 2.80001C145.1 2.70001 145.1 3.40001 145.2 3.70001C145.8 9.80001 146.5 15.9 147.1 22C147.1 22.4 147.3 23 146.9 23.3C145.3 23.4 143.7 23.3 142.1 23.3C141.7 22.3 141.7 21.2 141.6 20.2C141.4 17.4 140.9 14.6 140.9 11.8C139.5 15.6 138.6 19.5 137.3 23.2C135.9 23.2 134.4 23.2 133 23.2C131.7 19.4 130.7 15.4 129.5 11.5C129 15.4 128.8 19.4 128.2 23.2C126.5 23.1 124.8 23.4 123.1 23C124 16.6 124.6 9.80001 125.5 3.10001ZM156.8 3.80001C157 3.40001 157.1 2.90001 157.6 2.90001C158.9 2.80001 160.2 2.80001 161.5 2.90001C162 3.00001 162.1 3.50001 162.3 3.90001C164.6 9.60001 166.8 15.4 169.1 21.1C169.4 21.8 169.6 22.6 170.1 23.2C168.4 23.7 166.6 23.4 164.8 23.4C163.9 22.6 163.8 21.2 163.4 20.2C160.9 20.2 158.3 20.2 155.7 20.2C155.2 21.2 155.2 22.6 154.3 23.4C152.6 23.5 151 23.4 149.3 23.4C149.5 22.3 150 21.3 150.4 20.3C152.4 14.8 154.6 9.30001 156.8 3.80001ZM159.4 9.60001C158.7 11.7 158 13.7 157.3 15.7C158.8 15.7 160.3 15.7 161.8 15.7C160.8 13.7 160.3 11.6 159.4 9.60001Z\"\n          fill=\"#DEB064\"\n        />\n      </svg>\n    );\n\n    const sidebar = (\n      <div class=\"max-w-[300px] w-full h-full bg-[#F9F6F6] rounded-2xl px-[25px] py-[20px] hidden sm:flex flex-col justify-between \">\n        {/* Top Area */}\n        <div class=\"\">\n          <span class=\"w-full\">{logo}</span>\n          {/* <span class=\"font-ns font\">{i18next.t('sideBar.title')}</span> */}\n          {/* Item List */}\n          <div class=\"flex gap-[3px] flex-col py-[30px] font-ns\">\n            {sideBarMenu\n              .filter(({ id }) => {\n                // Remove prodcut page if there is a selected one\n                if (id === 1 && (this.hasPreselectedProduct || widgetState.preselectedProduct)) {\n                  return false;\n                }\n                // Remove Shipping if it is already valid\n                if (id === 2 && widgetState.isDeliveryValid) {\n                  return false;\n                }\n                // Remove billing if it is already valid\n                if (id === 3 && widgetState.isBillingValid) {\n                  return false;\n                }\n                return true;\n              })\n              .map(({ subtitle, title, svg, id }) => {\n                return (\n                  <div class={joinClass('w-full py-[8px] px-[8px] flex gap-3 rounded-xl cursor-default ', id === this.step ? ' border-[1px] border-[#000]  pl-[16px]' : '')}>\n                    {/* Left */}\n                    <div class=\"h-[40px] w-[40px] border-[1px] border-black rounded-3xl flex place-content-center place-items-center overflow-hidden\">{svg}</div>\n                    {/* Right */}\n                    <div class=\"flex flex-col place-content-center\">\n                      <span class=\"text-[16px] leading-6 \">{title}</span>\n                      <span class=\"text-[10px] text-[#4F4F4F]\">{subtitle}</span>\n                    </div>\n                  </div>\n                );\n              })}\n          </div>\n        </div>\n        <div class=\"flex flex-col gap-1 font-ns\">\n          <span class=\"text-[16px]\">\n            <span\n              class={joinClass('cursor-pointer', widgetState.language === 'en' ? 'font-semibold' : '')}\n              onClick={() => {\n                if (i18next.language !== 'en') this.switchlanguage('en');\n              }}\n            >\n              English\n            </span>{' '}\n            /{' '}\n            <span\n              class={joinClass('cursor-pointer', widgetState.language === 'sv' ? 'font-semibold' : '')}\n              onClick={() => {\n                if (i18next.language !== 'sv') this.switchlanguage('sv');\n              }}\n            >\n              Swedish\n            </span>\n          </span>\n\n          {/* CHORE add tooltip to this */}\n          <span class=\"text-[#4F4F4F] text-xs cursor-pointer\">Powered by charma.io</span>\n        </div>\n      </div>\n    );\n    const errorBlock = widgetState.error && <p class=\"text-red-500 font-ns text-xs pt-[10px]\">{this.getError()}</p>;\n\n    const isInitialLoading = this.isProductLoading;\n\n    return (\n      <Host>\n        {/* <slot> */}\n        {/* <charma-button disabled={false} size={this.buttonSize} onClick={this.toggleForm} loading={false}></charma-button> */}\n        <charma-gifting-button size={this.buttonSize} onClick={this.toggleForm} disabled={this.disabled}></charma-gifting-button>\n        <div\n          class={joinClass(\n            'w-screen h-screen bg-[#00000080] absolute flex z-[9998] place-content-center place-items-center top-0 left-0  overscroll-contain',\n            this.showWidget ? 'visible' : 'invisible',\n          )}\n        >\n          {/* Actual Modal */}(\n          <div\n            class={joinClass(\n              'max-w-[1200px] max-h-[800px] bg-white flex py-[20px] px-[20px] rounded-2xl gap-[30px] overflow-hidden',\n              this.showWidget ? ' w-full h-full' : 'w-[0px] h-[0px]',\n            )}\n          >\n            {sidebar}\n            <div class=\"w-full flex justify-between flex-col \">\n              {/* top area */}\n              <div class=\"flex flex-col h-[92%] \">\n                {/* Header */}\n                <div class=\"flex justify-between\">\n                  <span class=\" font-ns py-4 text-[18px] capitalize\">{renderHeader()}</span>\n                  {closeButton}\n                </div>\n                {/* Content */}\n                <div class=\"overflow-y-scroll\">{isInitialLoading ? loader : this.renderSteps()}</div>\n              </div>\n\n              {/* footer */}\n              <div class=\"h-[50px] w-full flex justify-between py-4\">\n                <div class=\" flex gap-4\">\n                  {this.step !== 1 && this.step !== 5 && (\n                    <div>\n                      <button\n                        onClick={this.goBack}\n                        disabled={isInitialLoading}\n                        class=\"inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 bg-white text-black shadow hover:bg-white/90 h-9 px-4 py-2 font-ns gap-2 border-gray-300 border-[1px]\"\n                      >\n                        <svg width=\"11\" height=\"9\" viewBox=\"0 0 11 9\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n                          <path\n                            d=\"M5.42505 0.44482L5.425 0.444776C5.34532 0.365188 5.2373 0.320483 5.12467 0.320483C5.01204 0.320483 4.90402 0.365188 4.82434 0.444776L4.82431 0.444798L1.07431 4.1948L1.07429 4.19482C0.994704 4.27451 0.95 4.38253 0.95 4.49515C0.95 4.60778 0.994704 4.7158 1.07429 4.79549L1.07431 4.79551L4.82371 8.54491C4.8625 8.58635 4.9092 8.61961 4.96105 8.64272C5.01318 8.66595 5.06946 8.67843 5.12653 8.67944C5.18359 8.68045 5.24027 8.66995 5.2932 8.64858C5.34612 8.6272 5.39419 8.59538 5.43454 8.55503C5.4749 8.51467 5.50672 8.4666 5.52809 8.41368C5.54947 8.36076 5.55997 8.30408 5.55896 8.24701C5.55795 8.18995 5.54546 8.13367 5.52223 8.08153C5.49913 8.02968 5.46587 7.98298 5.42443 7.9442L2.40038 4.92015H10.3747C10.4874 4.92015 10.5955 4.87538 10.6752 4.79567C10.7549 4.71597 10.7997 4.60787 10.7997 4.49515C10.7997 4.38244 10.7549 4.27434 10.6752 4.19463C10.5955 4.11493 10.4874 4.07015 10.3747 4.07015H2.40038L5.42503 1.04551L5.42505 1.04549C5.50464 0.965799 5.54934 0.857779 5.54934 0.745153C5.54934 0.632528 5.50464 0.524508 5.42505 0.44482Z\"\n                            fill=\"black\"\n                            stroke=\"black\"\n                            stroke-width=\"0.1\"\n                          />\n                        </svg>\n                        <span>{i18next.t('back')}</span>\n                      </button>\n                    </div>\n                  )}\n                  {errorBlock}\n                </div>\n                <button\n                  onClick={this.nextStep}\n                  disabled={isInitialLoading}\n                  class=\"inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 bg-black text-white shadow hover:bg-black/90 h-9 px-4 py-2 font-ns gap-2 border-black border-[1px]\"\n                >\n                  {this.getButtonLabel()}\n                </button>\n              </div>\n            </div>\n          </div>\n          )\n        </div>\n        {/* </slot> */}\n      </Host>\n    );\n  }\n}\n"]}